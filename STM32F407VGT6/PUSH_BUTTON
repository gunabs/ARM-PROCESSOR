
#include <stdint.h>

#define RCC_AHB1ENR   (*(volatile uint32_t*)0x40023830)
#define GPIOA_MODER   (*(volatile uint32_t*)0x40020000)
#define GPIOA_IDR     (*(volatile uint32_t*)0x40020010)
#define GPIOD_MODER   (*(volatile uint32_t*)0x40020C00)
#define GPIOD_ODR     (*(volatile uint32_t*)0x40020C14)

void delay(unsigned int m)
{
	unsigned int i;
	for( i=0;i<m;i++)
	{

	}
}

int main(void)
{

    RCC_AHB1ENR |= (1 << 0);
    RCC_AHB1ENR |= (1 << 3);


    GPIOA_MODER &= ~(3 << (0 * 2));


    GPIOD_MODER &= ~(3 << (12 * 2));
    GPIOD_MODER |=  (1 << (12 * 2));

    while(1)
    {
        if(GPIOA_IDR & (1 << 0))
        {
            GPIOD_ODR |= (1 << 12);
            delay(500000);
        }
        else
        {

            GPIOD_ODR &= ~(1 << 12);
        }
    }
}

