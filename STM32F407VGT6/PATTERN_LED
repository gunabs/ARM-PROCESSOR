
#include <stdint.h>

#define RCC_AHP1ENR  (*(volatile unsigned int*) 0x40023830)
#define GPIOD_MODER   (*(volatile unsigned int*) 0x40020C00)
#define GPIOD_ODR     (*(volatile unsigned int*) 0x40020C14)

void delay()
{
	unsigned int i;
	for( i=0;i<500000;i++)
	{

	}

}

int main(void)
{
	RCC_AHP1ENR|=(1<<3);

	GPIOD_MODER &= ~(0xff<<24);
	GPIOD_MODER |= (0x55<<24);

	unsigned int pattern =1;
	unsigned int direction=0;

	while(1)
	{
		GPIOD_ODR =(GPIOD_ODR & ~(0xf<<12))|(pattern<<12);

		delay();

       if(direction==0)
       {
    	   pattern=(pattern<<1);
    	   if(pattern==0x08)
    	      	            {
    	      	           	direction=1;
    	      	            }
       }
       else
       {
    	   pattern=(pattern>>1);
    	             if(pattern==0x01)
    	             {
    	          	   direction=0;
    	             }
       }



	}


	return 0;

}
